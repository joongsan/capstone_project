define("experimentHelpers",["dctk/dctk"],function(e){function b(c){try{if(!e||!e.enabled)return{evaluationResult:{hasError:!0,error:"DCTK_NOT_READY_OR_UNAVAILABLE"}};var b=e.logging.pageName;if(b!==c)return{evaluationResult:{hasError:!0,error:"EXPERIMENT_NOT_TARGETED_FOR_CURRENT_PAGE "+b}}}catch(f){return{evaluationResult:{hasError:!0,error:f.message}}}return{evaluationResult:{hasError:!1,error:"NO_ERROR"}}}return{evaluateExperimentOptions:function(c){return void 0!==c.pageName?b(c.pageName):{evaluationResult:{hasError:!1,error:"NO_ERROR"}}}}});define("experimentRecorder",["experimentHelpers","dctk/dctk","jquery"],function(e,b,c){var h=function(f,c,d){f.hasError?d({bucketValue:void 0,evaluationResult:f}):b&&b.enabled&&"function"===typeof b.evaluateExperimentAndLog?b.evaluateExperimentAndLog({id:c,callback:function(a){void 0!==a&&(void 0!==a.error?d({bucketValue:void 0,evaluationResult:{hasError:!0,error:a.error.message}}):d({bucketValue:a.value,evaluationResult:f}))}}):d({bucketValue:void 0,evaluationResult:{hasError:!0,error:"DCTK_NOT_READY_OR_UNAVAILABLE"}})};return{evaluateAndRecord:function(b,k,d,a){if(void 0!==a&&(a=e.evaluateExperimentOptions(a),a.evaluationResult.hasError)){d({bucketValue:void 0,evaluationResult:a.evaluationResult});return}var g="";c.each(k,function(b,a){g+="\x26preconditions\x3d"+a});c.ajax({dataType:"json",url:"/loyalty/evaluatePreconditions?abacusId\x3d"+b+g,timeout:5E3,success:function(a){h(a,b,d)},error:function(a,b,c){d({bucketValue:void 0,evaluationResult:{hasError:!0,error:c}})}})}}});
//# sourceMappingURL=experimentRecorderV2.js.map